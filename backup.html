<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>NOVA ADS · النسخ الاحتياطي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: system-ui, sans-serif; }
        body { background: #f0f4fa; padding: 16px; padding-bottom: 80px; }
        .header { display: flex; align-items: center; gap: 12px; background: white; padding: 16px; border-radius: 30px; margin-bottom: 20px; }
        .logo { width: 56px; height: 56px; background: #102a43; border-radius: 18px; overflow: hidden; }
        .logo img { width: 100%; height: 100%; object-fit: cover; }
        .title { font-size: 24px; font-weight: 700; color: #0b2a41; }
        .card { background: white; border-radius: 40px; padding: 30px 20px; margin-bottom: 20px; text-align: center; }
        .btn {
            background: #0f2b46; color: white; border: none; width: 100%; padding: 22px; border-radius: 60px;
            font-size: 20px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 12px;
            margin: 16px 0; cursor: pointer;
        }
        .btn-outline {
            background: white; border: 2px solid #3b82f6; color: #1e4a8b;
        }
        .file-input { display: none; }
        .warning { color: #b45309; background: #ffeed9; padding: 20px; border-radius: 40px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo"><img src="img/logo.png" alt="NOVA"></div>
        <div><div class="title">النسخ الاحتياطي</div><div class="sub">تصدير / استيراد البيانات</div></div>
    </div>

    <div class="card">
        <i class="fas fa-download fa-3x" style="color:#1e4a8b;"></i>
        <h3 style="margin:20px 0;">تصدير جميع البيانات</h3>
        <button class="btn" onclick="exportData()"><i class="fas fa-file-export"></i> تصدير ملف JSON</button>
    </div>

    <div class="card">
        <i class="fas fa-upload fa-3x" style="color:#1e4a8b;"></i>
        <h3 style="margin:20px 0;">استيراد بيانات</h3>
        <button class="btn btn-outline" onclick="document.getElementById('importFile').click()"><i class="fas fa-file-import"></i> اختيار ملف</button>
        <input type="file" id="importFile" class="file-input" accept=".json" onchange="importData(event)">
        <div class="warning" style="margin-top:20px;">
            <i class="fas fa-exclamation-triangle"></i> الاستيراد سيحل محل البيانات الحالية!
        </div>
    </div>

    <div class="bottom-nav" style="position: fixed; bottom:0; left:0; right:0; background:white; display:flex; justify-content:space-around; padding:12px 16px 20px; border-radius:40px 40px 0 0;">
        <a href="dashboard.html" class="nav-item" style="display:flex; flex-direction:column; align-items:center; text-decoration:none; color:#7f8fa4;"><i class="fas fa-chart-pie" style="font-size:24px;"></i><span>الرئيسية</span></a>
        <a href="index.html" class="nav-item" style="display:flex; flex-direction:column; align-items:center; text-decoration:none; color:#7f8fa4;"><i class="fas fa-user-plus" style="font-size:24px;"></i><span>إضافة</span></a>
        <a href="vu.html" class="nav-item" style="display:flex; flex-direction:column; align-items:center; text-decoration:none; color:#7f8fa4;"><i class="fas fa-users" style="font-size:24px;"></i><span>العملاء</span></a>
        <a href="ads.html" class="nav-item" style="display:flex; flex-direction:column; align-items:center; text-decoration:none; color:#7f8fa4;"><i class="fas fa-coins" style="font-size:24px;"></i><span>يومي</span></a>
        <a href="total.html" class="nav-item" style="display:flex; flex-direction:column; align-items:center; text-decoration:none; color:#7f8fa4;"><i class="fas fa-calendar-alt" style="font-size:24px;"></i><span>ملخص</span></a>
    </div>

    <script>
        function exportData() {
            const data = {
                clients: JSON.parse(localStorage.getItem('nova_clients') || '[]'),
                daily: JSON.parse(localStorage.getItem('nova_daily') || '[]')
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `nova_ads_backup_${new Date().toISOString().slice(0,10)}.json`;
            a.click();
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.clients !== undefined) localStorage.setItem('nova_clients', JSON.stringify(data.clients));
                    if (data.daily !== undefined) localStorage.setItem('nova_daily', JSON.stringify(data.daily));
                    alert('تم استيراد البيانات بنجاح');
                    window.location.reload();
                } catch (err) {
                    alert('الملف غير صالح');
                }
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>